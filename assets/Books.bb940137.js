var t=Object.defineProperty,e=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(e,s,a)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,r=(t,r)=>{for(var i in r||(r={}))s.call(r,i)&&o(t,i,r[i]);if(e)for(var i of e(r))a.call(r,i)&&o(t,i,r[i]);return t},i=(t,e,s)=>(o(t,"symbol"!=typeof e?e+"":e,s),s);import{a as d}from"./index.2885cb15.js";import{_ as l}from"./index.6748816d.js";import{d as n,o as h,c,e as u,F as b,a as g,t as f}from"./vendor.280edc92.js";class k{constructor(t){i(this,"cover"),i(this,"title"),i(this,"author"),i(this,"isbn13"),i(this,"numPages"),i(this,"avgRating"),i(this,"numRatings"),i(this,"datePub"),i(this,"datePubEdition"),i(this,"rating"),i(this,"shelves"),i(this,"dateStarted"),i(this,"dateRead"),i(this,"dateAdded"),this.cover=r({},t.cover),this.title=r({},t.title),this.author=r({},t.author),this.isbn13=t.isbn13,this.numPages=t.numPages,this.avgRating=t.avgRating,this.numRatings=t.numRatings,this.datePub=t.datePub,this.datePubEdition=t.datePubEdition,this.rating=t.rating,this.shelves=t.shelves,this.dateStarted=t.dateStarted,this.dateRead=t.dateRead,this.dateAdded=t.dateAdded}}const m=n({name:"Books",data:()=>({books:[],headers:[{field:"cover",title:"Cover"},{field:"title",title:"Title"},{field:"author",title:"Author"},{field:"isbn13",title:"ISBN13"},{field:"numPages",title:"Pages"},{field:"avgRating",title:"Avg. rating"},{field:"numRatings",title:"Number ratings"},{field:"datePub",title:"Published"},{field:"datePubEdition",title:"Published (Edition)"},{field:"rating",title:"Rating"},{field:"shelves",title:"Shelves"},{field:"dateAdded",title:"Added"}],currentSort:"name",currentSortDir:"asc"}),computed:{sortedBooks(){return[...this.books].sort(((t,e)=>{let s=1;"desc"===this.currentSortDir&&(s=-1);let a=t[this.currentSort],o=e[this.currentSort];return["numPages","numRatings"].includes(this.currentSort)&&(a=Number(a.replace(/[^0-9]/g,"")),o=Number(o.replace(/[^0-9]/g,""))),a<o?-1*s:a>o?s:0}))}},async mounted(){const t=localStorage.getItem("books");if(t){JSON.parse(t).length===await d("https://goodreads-books-parser.herokuapp.com/total")?JSON.parse(t).forEach((t=>{this.books.push(new k(t))})):await this.updateBooks()}else await this.updateBooks()},methods:{async updateBooks(){try{const t=await d("https://goodreads-books-parser.herokuapp.com/");localStorage.setItem("books",JSON.stringify(t.data)),t.data.forEach((t=>{this.books.push(new k(t))}))}catch(t){throw new Error("Failed to load book list")}},sort(t){t===this.currentSort&&(this.currentSortDir="asc"===this.currentSortDir?"desc":"asc"),this.currentSort=t}}}),p=["onClick"],_={class:"book__cover"},v=["href"],P=["src","alt"],S={class:"book__title"},x=["href"],y=["href"],R={class:"book__text book__text--isbn13"},w={class:"book__text"},E={class:"book__text"},O={class:"book__text"},A={class:"book__text"},j={class:"book__text"},B={class:"book__text"},N={class:"book__text"},I={class:"book__text"};var D=l(m,[["render",function(t,e,s,a,o,r){return h(),c("div",null,[u("table",null,[u("thead",null,[u("tr",null,[(h(!0),c(b,null,g(t.headers,((e,s)=>(h(),c("th",{key:s,class:"books-header",onClick:s=>t.sort(e.field)},f(e.title),9,p)))),128))])]),u("tbody",null,[(h(!0),c(b,null,g(t.sortedBooks,((t,e)=>(h(),c("tr",{key:e,class:"book"},[u("td",_,[u("a",{class:"book__text",href:t.cover.href},[u("img",{src:t.cover.src,alt:t.cover.alt},null,8,P)],8,v)]),u("td",S,[u("a",{class:"book__text",href:t.title.href},f(t.title.text),9,x)]),u("td",null,[u("a",{class:"book__text",href:t.author.href},f(t.author.text),9,y)]),u("td",R,f(t.isbn13),1),u("td",w,f(t.numPages),1),u("td",E,f(t.avgRating),1),u("td",O,f(t.numRatings),1),u("td",A,f(t.datePub),1),u("td",j,f(t.datePubEdition),1),u("td",B,f(t.rating),1),u("td",N,f(t.shelves),1),u("td",I,f(t.dateAdded),1)])))),128))])])])}],["__scopeId","data-v-a772415a"]]);export{D as default};
